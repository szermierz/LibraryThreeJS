<!DOCTYPE html>
<html>
	<head>
		<title>The Library</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
	
		<!-- Grand father -->
		<script src="js/threejs/three.min.js"></script>
		<script src="js/threejs/TextGeometry.js"></script>
		<script src="js/threejs/FontUtils.js"></script>
		<script src="fonts/helvetiker.js"></script>
		
		<!-- Renderable -->
		<script src="js/objects/renderable.js"></script>
		
		<script>
			
			var g_ScreenWidth = window.innerWidth;
			var g_ScreenHeight = window.innerHeight;
			var g_MainScene = new THREE.Scene();
			var g_LoadingScene = new THREE.Scene();
			var g_MainCamera = new THREE.PerspectiveCamera( 90, window.innerWidth/window.innerHeight, g_ScreenHeight / 4, g_ScreenHeight / 2 );
			var g_Renderer = new THREE.WebGLRenderer();
			var g_IsLoading = true;
			var g_ObjectToLoad = 0;
			
			console.log("Globals loaded!");
			
			// Setup document
			g_MainCamera.position.z = g_ScreenHeight / 2;
			g_Renderer.setSize(g_ScreenWidth, g_ScreenHeight);
			document.body.appendChild(g_Renderer.domElement);
			
			console.log("Set up document");
			
			// Initialize loading
			var l_LoadingBorder1 = new THREE.PlaneGeometry(310, 110);
			var l_LoadingMaterial1 = new THREE.MeshBasicMaterial( { color: 0x999999 } );
			var l_LoadingBox1 = new THREE.Mesh(l_LoadingBorder1, l_LoadingMaterial1);
			g_LoadingScene.add(l_LoadingBox1);
			var l_LoadingBorder2 = new THREE.PlaneGeometry(300, 100);
			var l_LoadingMaterial2 = new THREE.MeshBasicMaterial( { color: 0xBBBBBB } );
			var l_LoadingBox2 = new THREE.Mesh(l_LoadingBorder2, l_LoadingMaterial2);
			g_LoadingScene.add(l_LoadingBox2);
			var l_LoadingTextString = "Loading...";
			var l_LoadingTextGeo = new THREE.TextGeometry( l_LoadingTextString, { size: 50, height: 1, curveSegments: 2/*, font: "Courier New"*/ });
			var l_LoadingTextMaterial = new THREE.MeshBasicMaterial( { color: 0x000000 } );
			var l_LoadintText = new THREE.Mesh( l_LoadingTextGeo, l_LoadingTextMaterial );
			l_LoadintText.position.x = -140;
			l_LoadintText.position.y = -23;
			g_LoadingScene.add(l_LoadintText);
			
			console.log("Initialized display!");
			
			// Load resources:
			//todo jakies tekstury
			console.log("Started loading resources!");
			
			
			var OnLoaded = function()
			{
				//todo
				
				console.log("Loaded resources!");
			}
			
			var renderLoop = function () 
			{
				if(g_IsLoading == true && g_ObjectToLoad <= 0)
				{
					g_IsLoading = false;

					OnLoaded();
				}

				requestAnimationFrame(renderLoop);
				
				if(g_IsLoading)
					g_Renderer.render(g_LoadingScene, g_MainCamera);
				else
					g_Renderer.render(g_MainScene, g_MainCamera);
			};

			renderLoop();
			
			
		</script>
		
	</body>
</html>